<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AthenAI ‚Äî Simplified Portal</title>
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --card: #0b1324;
      --muted: #94a3b8;
      --text: #e5e7eb;
      --accent: #22c55e;
      --accent-2: #60a5fa;
      --warn: #f59e0b;
      --danger: #ef4444;
      --link: #8bafff;
      --border: #1f2937;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 600px at 20% -10%, #1b2440 0%, transparent 60%),
                  radial-gradient(800px 500px at 100% -10%, #172038 0%, transparent 55%),
                  var(--bg);
    }
    a { color: var(--link); text-decoration: none; }
    a:hover { text-decoration: underline; }
    header {
      padding: 40px 24px 16px;
      display: grid;
      gap: 8px;
      border-bottom: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(16,24,40,.7), rgba(16,24,40,0));
    }
    .container { max-width: 1100px; margin: 0 auto; padding: 24px; }
    .title { font-size: 28px; font-weight: 700; letter-spacing: .3px; }
    .subtitle { color: var(--muted); }
    .grid { display: grid; gap: 16px; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); }
    .card {
      background: rgba(14, 23, 43, 0.8);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 20px 60px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,0.02);
    }
    .card h3 { margin: 0 0 8px; font-size: 16px; }
    .desc { color: var(--muted); font-size: 13px; margin: 4px 0 10px; }
    .pill {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 8px 10px; border: 1px dashed #2b354a; border-radius: 999px;
      background: #0a1122; color: #cbd5e1; font-size: 12px;
    }
    .links { display: grid; gap: 8px; }
    .links a { display: inline-flex; align-items: center; gap: 8px; padding: 8px 10px; border-radius: 8px; border: 1px solid #1f2937; background: #0b1223; }
    .links a:hover { background: #0e162b; }
    .section-title { margin: 24px 0 12px; font-size: 18px; font-weight: 700; }
    code, pre { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 12.5px; }
    pre { background: #0b1223; border: 1px solid #1f2937; border-radius: 10px; padding: 12px; overflow: auto; }
    .cols { display: grid; gap: 16px; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); }
    .kbd { font: inherit; background: #0d1427; border: 1px solid #243045; padding: 2px 6px; border-radius: 6px; }
    footer { color: var(--muted); border-top: 1px solid var(--border); padding: 16px 24px; font-size: 12px; text-align: center; }
    .status-indicator { display: inline-block; width: 8px; height: 8px; border-radius: 50%; margin-right: 8px; }
    .status-online { background: var(--accent); }
    .status-offline { background: var(--danger); }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="title">AthenAI ‚Äî Simplified Portal</div>
      <div class="subtitle">AI-powered research and analysis platform with real-time chat</div>
      <div class="pill">Simplified architecture with cost optimization</div>
    </div>
  </header>

  <main class="container">
    <section class="grid" aria-label="Quick Links">
      <div class="card">
        <h3>ü§ñ AI Chat Interface</h3>
        <div class="desc">Real-time chat with AI agents including research, analysis, and creative capabilities.</div>
        <div class="links">
          <a href="/chat.html" target="_blank">Launch Chat Interface</a>
        </div>
      </div>

      <div class="card">
        <h3>üîå API Endpoints</h3>
        <div class="desc">Core backend service with REST API and WebSocket support.</div>
        <div class="links">
          <a href="/health" target="_blank"><span class="status-indicator" id="health-status"></span>/health</a>
          <a href="/api/metrics" target="_blank">/api/metrics</a>
          <a href="#" onclick="testAPI()">/api/chat (Test)</a>
          <a href="#" onclick="testResearch()">/api/research (Test)</a>
        </div>
      </div>

      <div class="card">
        <h3>üí¨ WebSocket API</h3>
        <div class="desc">Real-time communication endpoints for chat rooms and user management.</div>
        <div class="links">
          <a href="/api/ws/rooms" target="_blank">/api/ws/rooms</a>
          <a href="#" onclick="showRoomExample()">/api/ws/rooms/:id (Example)</a>
        </div>
      </div>

      <div class="card">
        <h3>üß† Knowledge Graph</h3>
        <div class="desc">Neo4j-powered knowledge relationships and conversation context.</div>
        <div class="links">
          <a href="#" onclick="showCypherExample()">Query Knowledge Graph</a>
          <a href="#" onclick="showSessionExample()">View Session Data</a>
        </div>
      </div>

      <div class="card">
        <h3>üìä System Status</h3>
        <div class="desc">Monitor system health and performance metrics.</div>
        <div class="links">
          <a href="#" onclick="checkDatabases()">Database Status</a>
          <a href="#" onclick="showMetrics()">Performance Metrics</a>
          <a href="/api/metrics" target="_blank">Raw Metrics JSON</a>
        </div>
      </div>

      <div class="card">
        <h3>‚öôÔ∏è Configuration</h3>
        <div class="desc">Environment setup and API key configuration.</div>
        <div class="links">
          <a href="#" onclick="showEnvExample()">Environment Variables</a>
          <a href="#" onclick="showSetupGuide()">Setup Guide</a>
        </div>
      </div>
    </section>

    <section>
      <h2 class="section-title">Getting Started</h2>
      <div class="cols">
        <div class="card">
          <h3>1) Install Dependencies</h3>
          <div class="desc">Install Node.js packages for the simplified architecture.</div>
          <pre><code>npm install</code></pre>
        </div>

        <div class="card">
          <h3>2) Configure Environment</h3>
          <div class="desc">Copy and configure your environment variables.</div>
          <pre><code>cp .env.simplified.example .env
# Edit .env with your API keys</code></pre>
        </div>

        <div class="card">
          <h3>3) Start the Server</h3>
          <div class="desc">Launch the AthenAI server with WebSocket support.</div>
          <pre><code>npm run dev
# Server runs on http://localhost:3000</code></pre>
        </div>
      </div>
    </section>

    <section>
      <h2 class="section-title">API Testing</h2>
      <div class="grid">
        <div class="card">
          <h3>Chat API Test</h3>
          <pre><code>curl -X POST http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "Research AI developments", "sessionId": "test123"}'</code></pre>
        </div>
        <div class="card">
          <h3>Research API Test</h3>
          <pre><code>curl -X POST http://localhost:3000/api/research \
  -H "Content-Type: application/json" \
  -d '{"query": "Latest AI trends", "sessionId": "test123"}'</code></pre>
        </div>
        <div class="card">
          <h3>WebSocket Connection</h3>
          <pre><code>// JavaScript WebSocket client
const socket = io('http://localhost:3000');
socket.emit('join_room', {
  roomId: 'general',
  userId: 'user123',
  username: 'TestUser'
});</code></pre>
        </div>
      </div>
    </section>

    <div id="output" style="margin-top: 24px;"></div>
  </main>

  <footer>
    AthenAI Simplified ‚Ä¢ Real-time AI chat platform ‚Ä¢ <span id="version">v1.0.0</span>
  </footer>

  <script>
    // Check health status on load
    async function checkHealth() {
      try {
        const response = await fetch('/health');
        const data = await response.json();
        const indicator = document.getElementById('health-status');
        if (data.status === 'healthy') {
          indicator.className = 'status-indicator status-online';
        } else {
          indicator.className = 'status-indicator status-offline';
        }
      } catch (error) {
        document.getElementById('health-status').className = 'status-indicator status-offline';
      }
    }

    async function testAPI() {
      try {
        showOutput('Chat API', 'Loading...');
        const response = await fetch('/api/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            message: 'Hello AthenAI!',
            sessionId: 'test_' + Date.now(),
            userId: 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9)
          })
        });
        const data = await response.json();
        showOutput('Chat API Response', JSON.stringify(data, null, 2));
      } catch (error) {
        showOutput('Chat API Error', error.message);
      }
    }

    async function testResearch() {
      try {
        showOutput('Research API', 'Loading...');
        const response = await fetch('/api/research', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            query: 'AI research trends 2024',
            sessionId: 'test_' + Date.now()
          })
        });
        const data = await response.json();
        showOutput('Research API Response', JSON.stringify(data, null, 2));
      } catch (error) {
        showOutput('Research API Error', error.message);
      }
    }

    async function showRoomExample() {
      try {
        const response = await fetch('/api/ws/rooms');
        const data = await response.json();
        showOutput('Active Rooms', JSON.stringify(data, null, 2));
      } catch (error) {
        showOutput('Rooms API Error', error.message);
      }
    }

    function showCypherExample() {
      const example = `// Example Cypher query
MATCH (s:Session)-[:HAS_ORCHESTRATION]->(o:Orchestration)
RETURN s.id, o.message, o.created_at
ORDER BY o.created_at DESC
LIMIT 10`;
      showOutput('Cypher Query Example', example);
    }

    function showSessionExample() {
      const example = `// View session data
GET /api/conversations/session_123

// Response:
{
  "session_id": "session_123",
  "conversations": [...],
  "count": 5
}`;
      showOutput('Session API Example', example);
    }

    async function checkDatabases() {
      try {
        const response = await fetch('/api/metrics');
        const data = await response.json();
        showOutput('System Metrics', JSON.stringify(data, null, 2));
      } catch (error) {
        showOutput('Metrics Error', error.message);
      }
    }

    async function showMetrics() {
      await checkDatabases();
    }

    function showEnvExample() {
      const example = `# Required Environment Variables
NODE_ENV=development
PORT=3000

# Database Configuration
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
NEO4J_URI=neo4j+s://your-instance.databases.neo4j.io
NEO4J_USER=neo4j
NEO4J_PASSWORD=your-password
REDIS_URL=redis://your-redis-cloud-url:port

# AI Services
OPENAI_API_KEY=your-openai-key
LANGCHAIN_API_KEY=your-langsmith-key

# Optional Search APIs
SERPAPI_API_KEY=your-serpapi-key`;
      showOutput('Environment Configuration', example);
    }

    function showSetupGuide() {
      const guide = `# AthenAI Setup Guide

1. Clone the repository
2. Copy .env.simplified.example to .env
3. Configure your API keys in .env
4. Install dependencies: npm install
5. Start development server: npm run dev
6. Open chat interface: http://localhost:3000/chat.html

## Required Services:
- OpenAI API (for AI agents)
- Supabase (PostgreSQL database)
- Neo4j Aura (knowledge graph)
- Redis Cloud (caching)

## Optional Services:
- SerpAPI (web search)
- Unstructured API (document processing)
- LangSmith (AI tracing)`;
      showOutput('Setup Guide', guide);
    }

    function showOutput(title, content) {
      const output = document.getElementById('output');
      output.innerHTML = `
        <div class="card">
          <h3>${title}</h3>
          <pre><code>${content}</code></pre>
        </div>
      `;
      output.scrollIntoView({ behavior: 'smooth' });
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', () => {
      checkHealth();
      setInterval(checkHealth, 30000); // Check health every 30 seconds
    });
  </script>
</body>
</html>
